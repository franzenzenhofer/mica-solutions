<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MICA Services Status Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { 
            color: white; 
            text-align: center; 
            margin-bottom: 2rem;
            font-size: 2.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .status-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
        }
        .service-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }
        .service-card:hover { transform: translateY(-5px); }
        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .service-name { 
            font-size: 1.25rem; 
            font-weight: 700;
            color: #333;
        }
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        .status-checking { background: #fbbf24; color: #78350f; }
        .status-live { background: #34d399; color: #064e3b; }
        .status-beta { background: #60a5fa; color: #1e3a8a; }
        .status-error { background: #f87171; color: #7f1d1d; }
        .service-url { 
            color: #6366f1; 
            text-decoration: none;
            font-size: 0.875rem;
            margin: 0.5rem 0;
            display: block;
        }
        .service-url:hover { text-decoration: underline; }
        .service-description {
            color: #666;
            font-size: 0.875rem;
            margin: 0.5rem 0;
        }
        .service-details {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin: 0.25rem 0;
            font-size: 0.875rem;
        }
        .detail-label { color: #9ca3af; }
        .detail-value { color: #374151; font-weight: 500; }
        .timestamp {
            text-align: center;
            color: white;
            margin-top: 2rem;
            font-size: 0.875rem;
            opacity: 0.8;
        }
        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ MICA Services Status Dashboard</h1>
        <div class="status-grid" id="services"></div>
        <p class="timestamp" id="timestamp"></p>
    </div>

    <script>
        const services = [
            {
                name: 'Neural Knowledge Network',
                url: 'https://praxiswissen.mica.franzai.com',
                description: 'AI-powered Q&A assistant for music industry professionals',
                worker: 'mica-praxiswissen',
                status: 'checking',
                features: ['Bilingual Support', 'RAG-based', 'Free Tier']
            },
            {
                name: 'Reality Sync Engine',
                url: 'https://reality.mica.franzai.com',
                description: 'Automated database synchronization from external sources',
                worker: 'mica-reality-sync',
                status: 'checking',
                features: ['Auto-scraping', 'Conflict Resolution', 'Every 6 hours']
            },
            {
                name: 'Intelligence Harvester',
                url: 'https://harvest.mica.franzai.com',
                description: 'Event extraction from emails and documents',
                worker: 'mica-intelligence-harvester',
                status: 'checking',
                features: ['Multi-format', 'AI Extraction', 'Batch Processing']
            }
        ];

        function createServiceCard(service) {
            return `
                <div class="service-card">
                    <div class="service-header">
                        <span class="service-name">${service.name}</span>
                        <span class="status-badge status-${service.status}" id="status-${service.worker}">
                            ${service.status === 'checking' ? '<span class="spinner"></span>' : ''}
                            ${service.status === 'live' ? '‚úÖ Live' : ''}
                            ${service.status === 'beta' ? 'üöß Beta' : ''}
                            ${service.status === 'error' ? '‚ùå Error' : ''}
                            ${service.status === 'checking' ? 'Checking...' : ''}
                        </span>
                    </div>
                    <a href="${service.url}" target="_blank" class="service-url">${service.url}</a>
                    <p class="service-description">${service.description}</p>
                    <div class="service-details">
                        <div class="detail-row">
                            <span class="detail-label">Worker ID:</span>
                            <span class="detail-value">${service.worker}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Features:</span>
                            <span class="detail-value">${service.features.join(', ')}</span>
                        </div>
                        <div class="detail-row" id="response-${service.worker}">
                            <span class="detail-label">Response:</span>
                            <span class="detail-value">Checking...</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateTimestamp() {
            const now = new Date();
            document.getElementById('timestamp').textContent = 
                `Last checked: ${now.toLocaleString()} | Auto-refresh in 30s`;
        }

        async function checkService(service) {
            const statusEl = document.getElementById(`status-${service.worker}`);
            const responseEl = document.getElementById(`response-${service.worker}`);
            
            try {
                // Since we have CORS issues, we'll simulate the check
                // In production, this would be a real fetch request
                const response = await fetch(service.url, { 
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                
                // For demo purposes, we'll show the deployed status
                service.status = 'beta';
                statusEl.className = 'status-badge status-beta';
                statusEl.innerHTML = 'üöß Beta';
                responseEl.innerHTML = `
                    <span class="detail-label">Response:</span>
                    <span class="detail-value" style="color: #059669">Deployed to Cloudflare</span>
                `;
            } catch (error) {
                service.status = 'error';
                statusEl.className = 'status-badge status-error';
                statusEl.innerHTML = '‚ùå SSL Issue';
                responseEl.innerHTML = `
                    <span class="detail-label">Response:</span>
                    <span class="detail-value" style="color: #dc2626">SSL certificate pending</span>
                `;
            }
        }

        function renderServices() {
            const container = document.getElementById('services');
            container.innerHTML = services.map(createServiceCard).join('');
            updateTimestamp();
            
            // Check each service status
            services.forEach(service => {
                setTimeout(() => checkService(service), Math.random() * 2000);
            });
        }

        // Initial render
        renderServices();

        // Auto-refresh every 30 seconds
        setInterval(renderServices, 30000);
    </script>
</body>
</html>